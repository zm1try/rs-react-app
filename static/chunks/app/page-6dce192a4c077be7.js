(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6:(e,t,r)=>{"use strict";r.d(t,{default:()=>y});var s=r(5155),a=r(2115),n=r(6784),l=r(9045);function c(){let{theme:e,toggleTheme:t}=(0,l.W)();return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"theme-switcher flex-text ".concat(e===n.P.DARK?"dark":"light"),children:[(0,s.jsxs)("label",{htmlFor:"dark",children:["dark",(0,s.jsx)("input",{type:"radio",id:"dark",name:"dark",value:e,checked:e===n.P.DARK,onChange:t})]}),(0,s.jsxs)("label",{htmlFor:"light",children:["light",(0,s.jsx)("input",{type:"radio",id:"light",name:"light",value:e,checked:e===n.P.LIGHT,onChange:t})]})]})})}var i=r(5695);let o=function(){let e=(0,i.useRouter)(),t=(0,i.useSearchParams)(),[r,n]=(0,a.useState)(""),[l,o]=(0,a.useState)(r),d=e=>{o(e||"")};return(0,s.jsxs)("div",{className:"search-container",children:[(0,s.jsxs)("form",{title:"form",className:"search-form",onSubmit:r=>{r.preventDefault();let s=(null==l?void 0:l.trim())||"";n(s);let a=new URLSearchParams(t.toString());s?a.set("search",s):a.delete("search"),a.set("page","1"),e.push("?".concat(a.toString()))},children:[(0,s.jsx)("input",{type:"search",value:l,onChange:e=>d(e.target.value),placeholder:"Enter something to search"}),(0,s.jsx)("button",{type:"submit",children:"Search"})]}),(0,s.jsx)(c,{})]})};var d=r(4540),h=r(9616),u=r(802);let m=e=>{let{character:t}=e,[r,n]=(0,a.useState)(""),l=(0,d.wA)(),c=(0,d.d4)(e=>e.selectedCharacters.selected.includes(r));return(0,a.useEffect)(()=>{t&&n(t.url)},[t]),(0,s.jsx)("div",{children:(0,s.jsx)("label",{children:(0,s.jsx)("input",{type:"checkbox",checked:c,onChange:()=>{l((0,h.T1)(r)),l(c?(0,u.q$)(t.url):(0,u.B5)(t))}})})})},x=e=>{let{character:t,onClick:r}=e,{theme:a}=(0,l.W)();return(0,s.jsxs)("div",{className:"card ".concat(a===n.P.DARK?"dark":"light"),children:[(0,s.jsx)(m,{character:t}),(0,s.jsx)("button",{className:"card-button",onClick:e=>r(e,t),children:(0,s.jsx)("p",{children:t.name})})]})};function g(e){let{characters:t,searchQuery:r,children:a}=e,n=(0,i.useRouter)(),l=(0,i.useSearchParams)(),c=e=>{let t=(null==e?void 0:e.url.split("/").filter(Boolean).pop())||"";if(t){let e=new URLSearchParams(l.toString());e.set("page","1"),n.push("/details/".concat(t,"?").concat(e.toString()))}};return(null==t?void 0:t.length)>0?(0,s.jsxs)("div",{"data-testid":"results-container",className:"results-container",children:[(0,s.jsx)("div",{className:"results-list",children:t.map(e=>(0,s.jsx)("div",{className:"results-list__item",children:(0,s.jsx)(x,{character:e,onClick:()=>c(e)})},e.name))}),a]}):t.length?null:(0,s.jsxs)("p",{children:["Nothing to show for search term: ",r]})}function j(){let[e,t]=(0,a.useState)(!1);if(e)throw Error();return(0,s.jsx)("button",{type:"button",onClick:()=>t(!0),children:"Trigger Error"})}let p=()=>{let e=(0,i.useRouter)(),{theme:t}=(0,l.W)(),r=(0,i.useSearchParams)(),a=r.get("page"),c=t=>{let s=new URLSearchParams(r.toString());Number(a)!==t&&(s.set("page",t.toString()),e.push("?".concat(s.toString())))};return(0,s.jsxs)("div",{className:"pagination-container flex-text ".concat(t===n.P.DARK?"dark":"light"),children:[(0,s.jsx)("button",{onClick:()=>c(Number(a)-1),disabled:!a||1===Number(a),children:"Previous"}),(0,s.jsx)("div",{children:(0,s.jsxs)("span",{children:["Page ",Number(a)||1]})}),(0,s.jsx)("button",{onClick:()=>c(Number(a)+1),children:"Next"})]})},v=e=>{let{isPaginationVisible:t}=e;return(0,s.jsxs)("div",{className:"footer-actions",children:[t&&(0,s.jsx)(p,{}),(0,s.jsx)(j,{})]})},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0]?Object.keys(e[0]):[],r=e.map(e=>t.map(t=>{let r=e[t];return Array.isArray(r)?r.join(";"):'"'.concat(r,'"')}).join(","));return[t.join(","),...r].join("\n")},b=()=>{let e=(0,d.wA)(),t=(0,d.d4)(e=>e.selectedCharacters.selected),r=(0,d.d4)(e=>e.savedItems.characters),{theme:a}=(0,l.W)();return(0,s.jsx)(s.Fragment,{children:t.length>0&&(0,s.jsxs)("div",{className:"flyout-panel",children:[(0,s.jsxs)("div",{className:"flex-text ".concat(a===n.P.DARK?"dark":"light"),children:[t.length," items are selected"]}),(0,s.jsx)("button",{onClick:()=>{e((0,h.CQ)()),e((0,u.M3)())},children:"Unselect all"}),(0,s.jsx)("button",{onClick:()=>{let e=new Blob([f(r)],{type:"text/csv"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="".concat(r.length,"_characters.csv"),t.click()},children:"Download"})]})})},S=e=>{let{characterDetails:t=null}=e,r=(0,i.useRouter)(),a=(0,i.useSearchParams)(),{theme:c}=(0,l.W)();return t&&(0,s.jsxs)("div",{className:"details-container flex-text ".concat(c===n.P.DARK?"dark":"light"),children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{children:["Name: ",t.name]}),(0,s.jsxs)("p",{children:["Birth year: ",t.birth_year]})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{let e=new URLSearchParams(a.toString());e.set("page","1"),r.push("/?".concat(e.toString()))},children:"Close"})]})},y=e=>{let{characters:t,characterDetails:r=null,withDetails:a}=e,{theme:c}=(0,l.W)();if(!t)return(0,s.jsx)("div",{children:"Not Found"});let i=t&&t.length>0;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:"flex-text ".concat(c===n.P.DARK?"dark":"light"),children:"swApi search"}),(0,s.jsx)(o,{}),(0,s.jsx)(g,{characters:t||[],searchQuery:"",children:a&&(0,s.jsx)(S,{characterDetails:r})}),(0,s.jsx)(b,{}),(0,s.jsx)(v,{isPaginationVisible:!!i})]})}},802:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>l,B5:()=>c,M3:()=>o,q$:()=>i});var s=r(1990);let a={characters:[]},n=(0,s.Z0)({name:"savedItems",initialState:a,reducers:{addItem:(e,t)=>{e.characters.push(t.payload)},removeItemByKey:(e,t)=>{e.characters=e.characters.filter(e=>e.url!==t.payload)},removeAllItems:e=>{e.characters=a.characters}}}),l=n,{addItem:c,removeItemByKey:i,removeAllItems:o}=n.actions},4019:(e,t,r)=>{Promise.resolve().then(r.bind(r,4062)),Promise.resolve().then(r.bind(r,6))},4062:(e,t,r)=>{"use strict";r.d(t,{InitialLoader:()=>c});var s=r(5155),a=r(5695);let n=()=>(0,s.jsx)("p",{className:"loading",children:"Loading..."});var l=r(2115);let c=()=>{let e=(0,a.useRouter)(),t=(0,a.useSearchParams)();return(0,l.useEffect)(()=>{if(!t.get("page")){let r=new URLSearchParams(t.toString());r.set("page","1"),e.replace("?".concat(r.toString()))}},[e,t]),(0,s.jsx)(n,{})}},5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},6784:(e,t,r)=>{"use strict";r.d(t,{P:()=>s});var s=function(e){return e[e.DARK=0]="DARK",e[e.LIGHT=1]="LIGHT",e}({})},9045:(e,t,r)=>{"use strict";r.d(t,{D:()=>n,W:()=>l});var s=r(2115),a=r(6784);let n=(0,s.createContext)({theme:a.P.DARK,toggleTheme:()=>{}});function l(){if(!(0,s.useContext)(n))throw Error("useTheme must be used within a ThemeProvider");return(0,s.useContext)(n)}},9616:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>i,CQ:()=>c,T1:()=>l});let s="SWITCH_SELECTION",a="UNSELECT_ALL",n={type:"",selected:[]},l=e=>({type:s,payload:e}),c=()=>({type:a}),i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:{let r=e.selected.includes(t.payload||"")?e.selected.filter(e=>e!==t.payload):[...e.selected,t.payload];return{...e,selected:r}}case a:return{...e,selected:[]};default:return e}}}},e=>{var t=t=>e(e.s=t);e.O(0,[635,441,684,358],()=>t(4019)),_N_E=e.O()}]);